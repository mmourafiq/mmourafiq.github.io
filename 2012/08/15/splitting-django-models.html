<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Splitting Django models. &mdash; Mourad Mourafiq</title>
    <!--[if lt IE 9]><script src='https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js'></script><![endif]-->
    
    <link rel="stylesheet" href="/assets/normalize.css">
<link rel="stylesheet" href="/assets/core.css">
<link rel="stylesheet" href="/assets/buttons.css">
<link rel="stylesheet" href="/assets/icons.css">
<link rel="stylesheet" href="/assets/article.css">
<link rel="stylesheet" href="/assets/contact_form.css">
<link rel="stylesheet" href="/assets/syntax.css">
<link rel="stylesheet" href="/assets/google_map_container.css">
<link rel="stylesheet" href="/assets/cover.css">
<link rel="stylesheet" href="/assets/pagination.css">
<link rel="stylesheet" href="/assets/site_header.css">
<link rel="stylesheet" href="/assets/site_footer.css">
<link rel="stylesheet" href="/assets/responsive.css">
<link rel="stylesheet" href="/assets/app.css">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script src="/assets/google_map_fix.js"></script>
<script src="/assets/zoomable_image.js"></script>
<script src="/assets/app.js"></script>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

<script>
  var HN=[];HN.factory=function(e){return function(){HN.push([e].concat(Array.prototype.slice.call(arguments,0)))};},HN.on=HN.factory("on"),HN.once=HN.factory("once"),HN.off=HN.factory("off"),HN.emit=HN.factory("emit"),HN.load=function(){var e="hn-button.js";if(document.getElementById(e))return;var t=document.createElement("script");t.id=e,t.src="//hn-button.herokuapp.com/hn-button.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},HN.load();</script>
</script>



    <link rel="shortcut icon" href="/favicon.ico?v2" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Mourad Mourafiq" href="/atom.xml" />
    <meta name="title" content="Splitting Django models. ">
    <link rel="canonical" href="http://mourafiq.com/2012/08/15/splitting-django-models.html">
     
           
    <meta property="og:title" content="Splitting Django models."/>
    <meta property="og:url" content="http://mourafiq.com/2012/08/15/splitting-django-models.html"/>
    <meta property="og:image" content="http://mourafiq.com/images/posts/django.png"/>
    
    <meta property="og:description" content="Sometimes, it just makes sense to split up your models over multiple files instead of populating one models.py file. Allowing simple organization, easy maintenance clarity for new coder."/>
    <meta name="description" content="Sometimes, it just makes sense to split up your models over multiple files instead of populating one models.py file. Allowing simple organization, easy maintenance clarity for new coder."/>
    
    <meta property="og:site_name" content="Mourad Mourafiq">
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</head>
<body>

    <header class="site-header">
        <nav>
            <a class="brand" href="/">
                <img src="/images/logo.png" alt="Inc">
            </a>
            <a href="/about.html">About</a>
        </nav>
    </header>

    
<div class="cover  article-cover " style="background-image:url(/images/posts/django.png)"></div>


<div class='cover-caption'><a href='/about.html#pictures'>Django</a></div>


<article >
    <div class="container">
        <header>
            
            <div class="meta">
                <!--
                By
                <address><a rel="author" href="" title="Mourad Mourafiq." target="_blank">
                    Mourad Mourafiq.
                </a></address> &mdash;
                -->
                <time pubdate datetime="2012-15-August" title="Aug 15, 2012">
                    Aug 15, 2012
                </time> &mdash;
                
2 min read
            </div>
            
            <h1 class="title">Splitting Django models.</h1>
            <h2 class="subtitle">How to start a correct django project.</h2>
        </header>

        <section>
            <p>Sometimes, it just makes sense to split up your models over multiple files instead of populating one <code>models.py</code> file. Allowing simple organization, easy maintenance clarity for new coder.</p>

<p>The operation is quit easy but requires some extra steps, that we shall walk through in this post.</p>

<p>In this example we will work with two models, <code>Musician</code> and <code>Album</code>, each model is defined in its own file within an app called <code>myapp</code>.</p>

<p>Let’s assume that <code>Album</code> has a ForeignKey to <code>Musician</code>;</p>

<ul>
  <li>myapp
    <ul>
      <li>models
        <ul>
          <li>__init__.py</li>
          <li>musicians.py</li>
          <li>albums.py</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>The contents of <code>musicians.py</code>:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="lineno">1</span> <span class="k">class</span> <span class="nc">Musician</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="lineno">2</span>     <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="lineno">3</span>     <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="lineno">4</span>     <span class="n">instrument</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="lineno">5</span> 
<span class="lineno">6</span>     <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<span class="lineno">7</span>         <span class="n">app_label</span> <span class="o">=</span> <span class="s">&#39;myapp&#39;</span></code></pre></div>

<p>The contents of <code>albums.py</code>:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="lineno">1</span> <span class="k">class</span> <span class="nc">Album</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="lineno">2</span>     <span class="n">artist</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;Musician&#39;</span><span class="p">)</span>
<span class="lineno">3</span>     <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="lineno">4</span>     <span class="n">release_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
<span class="lineno">5</span>     <span class="n">num_stars</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
<span class="lineno">6</span> 
<span class="lineno">7</span>     <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<span class="lineno">8</span>         <span class="n">app_label</span> <span class="o">=</span> <span class="s">&#39;myapp&#39;</span></code></pre></div>

<p>Notice the definition of the app_label property in the inner Meta classes for each model. This is very important to let Django’s <code>syncdb</code> command know that these split up model classes belong to the same application.</p>

<p>We’re not done yet. You’ll also need to explicitly import each model class in the model module’s</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="lineno">1</span> <span class="kn">from</span> <span class="nn">myapp.models.musicians</span> <span class="kn">import</span> <span class="n">Musician</span>
<span class="lineno">2</span> <span class="kn">from</span> <span class="nn">myapp.models.albums</span> <span class="kn">import</span> <span class="n">Album</span></code></pre></div>

<p>And that’s it. Run <code>syncdb</code> and you should be all set.</p>

<p>NOTE: One thing to note about <code>ForeignKey</code>: either you don’t specify the import; you put the model then between ‘ ‘, or when you do the <code>import</code>, the order in the file <code>__init__.py</code> must be: first the model who doesn’t have the foreign key then the model who has the foreign key.</p>

<p>NOTE: If you are splitting up the contents of an existing <code>models.py</code> file, make sure to delete the original <code>models.py</code> file when you are done otherwise syncdb may get confused.</p>

            
<div class="social">
  
  <div class='twitter'>
    <a href="https://twitter.com/share" class="twitter-share-button"  data-text="Splitting Django models." data-related="mmourafiq">Tweet</a>
  </div>
  

  
  <div class='facebook'>
    <div class="fb-share-button" data-layout="button_count"></div>
  </div>
  

  
  <div class='google'>
    <div class="g-plusone" data-size="medium"></div>
  </div>
  
    
  
  <div class='hn'>
    <a href="https://news.ycombinator.com/submit" class="hn-button" data-title="Splitting Django models." data-url="http://mourafiq.com/2012/08/15/splitting-django-models.html" data-count="horizontal">Vote on Hacker News</a>
  </div>
  

  
  <div class='reddit'>
    <a href="//www.reddit.com/submit" onclick="window.open('//www.reddit.com/submit?url=http://mourafiq.com/2012/08/15/splitting-django-models.html&title=Splitting+Django+models.'); return false"> <img src="//www.redditstatic.com/spreddit7.gif" alt="submit to reddit" border="0" /> </a>
  </div>
  
</div>

        </section>

        <footer>
            <address>
                <img src="/images/logo.png">
                <p>
                Written by <strong><a rel="author" href="https://twitter.com/mmourafiq" title="Mourad Mourafiq." target="_blank">Mourad Mourafiq.</a></strong><br>
                    <span class="muted">Maths, Technology, Philosophy, Startups, ...</span>
                </p>
            </address>
            
            
            <section class="post_summary">
                <h3 class="title">Next up: <a href="/2012/09/01/save-list-packages-ubuntu.html" rel="prefetch">save a list of your favourite packages in Ubuntu.</a></h3>
                <p>Just reinstalled your ubuntu system, you must be thinking about all your favourite packages, but it’s really hard to start all over again. Well next time use this tip to save a list of all packages that you wish to have every time you run a ubuntu system!</p>
                <hr>
            </section>
             
            
            
            <section class="post_summary">
                <h3 class="title">Previous story: <a href="/2012/08/01/django-the-right-way.html" rel="prefetch">Django the right way.</a></h3>
                <p>One of the things I wish I had known when I begun developing in Django, is how to start a django the right way. I am not saying that the official documentation lacks pedagogic approach, but mostly it doesn’t reflect the real life; a Django project from developing phase to deploying phase.</p>
                <hr>
            </section>
             
            
            <section>
                <div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'mourafiq';

  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
            </section>
            
        </footer>
    </div>
</article>


    <footer class="site-footer">
        <div class="container">
            &copy; 2016 Mourad Mourafiq

            <nav>
                <a href="/">Blog</a> &middot;
                <a href="/about.html">About</a>
            </nav>

            <nav class="social">
                
<a href="https://twitter.com/mmourafiq" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter"></i></a>


<a href="https://github.com/mouradmourafiq" title="Watch on Github" target="_blank"><i class="icon icon-github"></i></a>


<a href="/atom.xml" title="RSS Feed">
  <i class="icon icon-rss"></i>
</a>

            </nav>
            <div>Based on Incorporated theme by <a href="https://sendtoinc.com">Inc</a></div>
        </div>
    </footer>

</body>
</html>
